{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///D:/Personal%20File/UNTAR/Kuliah/Semester%203/1.%20Front-end%20Programming/Vercel/week15-2025/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\ndeclare global {\r\n  var prisma: PrismaClient | undefined;\r\n}\r\n\r\nexport const prisma = global.prisma || new PrismaClient();\r\nif (process.env.NODE_ENV === 'development') global.prisma = prisma;\r\n"],"names":[],"mappings":";;;;AAAA;;AAMO,MAAM,SAAS,OAAO,MAAM,IAAI,IAAI,6IAAY;AACvD,wCAA4C,OAAO,MAAM,GAAG"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///D:/Personal%20File/UNTAR/Kuliah/Semester%203/1.%20Front-end%20Programming/Vercel/week15-2025/app/api/items/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { prisma } from '../../../lib/prisma';\n\n// get all items\nexport async function GET() {\n  try {\n    const items = await prisma.item.findMany({ orderBy: { date: 'desc' } });\n    return NextResponse.json(items);\n  } catch (error) {\n    return NextResponse.json({ error: 'gagal mengambil data' }, { status: 500 });\n  }\n}\n\n// create new item\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json();\n    // simple validation; ensure description and amount exist\n    if (!body.description || typeof body.amount !== 'number') {\n      return NextResponse.json({ error: 'data tidak valid' }, { status: 400 });\n    }\n\n    // normalize type\n    const type = body.type === 'INCOME' ? 'INCOME' : 'EXPENSE';\n\n    const data: any = {\n      description: body.description,\n      amount: body.amount,\n      type,\n      category: body.category ?? null,\n      isRecurring: !!body.isRecurring,\n      recurrence: body.recurrence ?? null,\n      nextOccurrence: body.nextOccurrence ? new Date(body.nextOccurrence) : null,\n      date: body.date ? new Date(body.date) : new Date(),\n    };\n\n    // amount effect on account: income adds, expense subtracts\n    const effect = type === 'INCOME' ? body.amount : -body.amount;\n    const p: any = prisma;\n    // create item and update account in a transaction\n    const [newItem] = await p.$transaction([\n      p.item.create({ data }),\n      // update account balance (create if missing)\n      p.account.upsert({\n        where: { name: 'default' },\n        update: { balance: { increment: effect } },\n        create: { name: 'default', balance: effect },\n      }),\n    ]);\n    return NextResponse.json(newItem, { status: 201 });\n  } catch (error) {\n    return NextResponse.json({ error: 'gagal membuat item' }, { status: 500 });\n  }\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAGO,eAAe;IACpB,IAAI;QACF,MAAM,QAAQ,MAAM,2NAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;YAAE,SAAS;gBAAE,MAAM;YAAO;QAAE;QACrE,OAAO,kPAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO,kPAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5E;AACF;AAGO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,yDAAyD;QACzD,IAAI,CAAC,KAAK,WAAW,IAAI,OAAO,KAAK,MAAM,KAAK,UAAU;YACxD,OAAO,kPAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAmB,GAAG;gBAAE,QAAQ;YAAI;QACxE;QAEA,iBAAiB;QACjB,MAAM,OAAO,KAAK,IAAI,KAAK,WAAW,WAAW;QAEjD,MAAM,OAAY;YAChB,aAAa,KAAK,WAAW;YAC7B,QAAQ,KAAK,MAAM;YACnB;YACA,UAAU,KAAK,QAAQ,IAAI;YAC3B,aAAa,CAAC,CAAC,KAAK,WAAW;YAC/B,YAAY,KAAK,UAAU,IAAI;YAC/B,gBAAgB,KAAK,cAAc,GAAG,IAAI,KAAK,KAAK,cAAc,IAAI;YACtE,MAAM,KAAK,IAAI,GAAG,IAAI,KAAK,KAAK,IAAI,IAAI,IAAI;QAC9C;QAEA,2DAA2D;QAC3D,MAAM,SAAS,SAAS,WAAW,KAAK,MAAM,GAAG,CAAC,KAAK,MAAM;QAC7D,MAAM,IAAS,2NAAM;QACrB,kDAAkD;QAClD,MAAM,CAAC,QAAQ,GAAG,MAAM,EAAE,YAAY,CAAC;YACrC,EAAE,IAAI,CAAC,MAAM,CAAC;gBAAE;YAAK;YACrB,6CAA6C;YAC7C,EAAE,OAAO,CAAC,MAAM,CAAC;gBACf,OAAO;oBAAE,MAAM;gBAAU;gBACzB,QAAQ;oBAAE,SAAS;wBAAE,WAAW;oBAAO;gBAAE;gBACzC,QAAQ;oBAAE,MAAM;oBAAW,SAAS;gBAAO;YAC7C;SACD;QACD,OAAO,kPAAY,CAAC,IAAI,CAAC,SAAS;YAAE,QAAQ;QAAI;IAClD,EAAE,OAAO,OAAO;QACd,OAAO,kPAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAqB,GAAG;YAAE,QAAQ;QAAI;IAC1E;AACF"}}]
}